<!DOCTYPE html>
<html lang="fil">
<head>
  <meta charset="UTF-8">
  <title>Yellow Pages PH – Hanap agad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap 5.3 CSS only -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Alpine -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- Custom PAL yellow -->
  <style>:root{--pal:#f9b000;} .bg-pal{background-color:var(--pal);} .text-pal{color:var(--pal);}</style>
</head>
<body class="bg-light">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-pal shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand fw-bold" href="#">Yellow Pages PH</a>
      <span class="navbar-text text-white small d-none d-md-block">Hanap agad sa Pilipinas</span>
    </div>
  </nav>

  <!-- Main grid -->
  <div class="container-fluid mt-3" x-data="app()" x-init="initMap()">
    <div class="row g-3" style="height:calc(100vh - 76px - 1rem)">
      <!-- Left column -->
      <div class="col-md-5 d-flex flex-column">
        <input
          x-model="query"
          @input="search()"
          class="form-control mb-3"
          placeholder="Anong hanap mo? (hal. plumber, cake shop)"
        >
        <div class="flex-grow-1 overflow-auto">
          <template x-for="b in filtered" :key="b.id">
            <div class="card mb-3 shadow-sm">
              <div class="card-body">
                <h5 class="card-title mb-1" x-text="b.name"></h5>
                <p class="mb-1 text-muted small" x-text="b.category"></p>
                <p class="mb-2 small" x-text="b.address"></p>

                <div class="d-flex gap-2 mb-2">
                  <a :href="'tel:'+b.phoneIntl" class="btn btn-sm btn-outline-dark">
                    <i class="bi bi-telephone"></i> <span x-text="b.phoneLocal"></span>
                  </a>
                  <button @click="directions(b)" class="btn btn-sm btn-outline-primary">
                    <i class="bi bi-geo-alt"></i> Direksyon
                  </button>
                </div>

                <div class="d-flex gap-2">
                  <a :href="grabUri(b)" target="_blank" class="btn btn-sm btn-success">Grab</a>
                  <a :href="'https://wa.me/'+b.phoneIntl.substr(1)" target="_blank" class="btn btn-sm btn-success">WhatsApp</a>
                  <a :href="b.ig" target="_blank" class="btn btn-sm btn-outline-danger">IG</a>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>

      <!-- Right column: map -->
      <div class="col-md-7">
        <div id="map" class="rounded shadow w-100 h-100"></div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS bundle (popper included) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Google Maps -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3iwTmt5Q5l5kpLKv1Y5r1bKj6X5krt8A&region=PH&language=fil"></script>

  <!-- Logic (unchanged) -->
  <script>
    const FAKE_PH = [
      {id:1, name:"Magiting Plumbing Services", category:"Plumber", phoneIntl:"+639171234567", phoneLocal:"0917 123 4567", address:"123 Magiting St., Quezon City, Metro Manila", lat:14.6760, lng:121.0437, ig:"https://instagram.com/magitingplumber"},
      {id:2, name:"Makati Electrical Solutions", category:"Electrician", phoneIntl:"+639998765432", phoneLocal:"0999 876 5432", address:"456 Ayala Ave., Makati City", lat:14.5565, lng:121.0236, ig:"https://instagram.com/makatielec"},
      {id:3, name:"Cebu Cakes & Bakes", category:"Cake Shop", phoneIntl:"+639565432109", phoneLocal:"0956 543 2109", address:"789 Osmeña Blvd., Cebu City", lat:10.3157, lng:123.8854, ig:"https://instagram.com/cebuflavor"},
      {id:4, name:"Davao Desktop Repair", category:"Computer Repair", phoneIntl:"+639681111222", phoneLocal:"0968 111 1222", address:"123 Roxas Ave., Davao City", lat:7.1907, lng:125.4553, ig:"https://instagram.com/davrepair"}
    ];

    function app() {
      return {
        query:'', filtered: FAKE_PH,
        map:null, markers:[],
        initMap() {
          const manila = {lat:14.5995, lng:120.9842};
          this.map = new google.maps.Map(document.getElementById('map'), {
            zoom: 11, center: manila, mapTypeControl:false, streetViewControl:false
          });
          this.showMarkers(FAKE_PH);
        },
        showMarkers(list) {
          this.markers.forEach(m => m.setMap(null));
          this.markers = [];
          list.forEach(b => {
            const m = new google.maps.Marker({position:{lat:b.lat,lng:b.lng}, map:this.map, title:b.name});
            this.markers.push(m);
          });
        },
        search() {
          const q = this.query.toLowerCase();
          this.filtered = q
            ? FAKE_PH.filter(b => b.name.toLowerCase().includes(q) || b.category.toLowerCase().includes(q))
            : FAKE_PH;
          this.showMarkers(this.filtered);
        },
        directions(b) {
          window.open(`https://www.google.com/maps/dir/?api=1&destination=${b.lat},${b.lng}&region=PH`, '_blank');
        },
        grabUri(b) {
          return `https://grb.to/dir?dest=${b.lat},${b.lng}`;
        }
      };
    }
  </script>
</body>
</html>
